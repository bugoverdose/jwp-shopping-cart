# 장바구니 미션 (협업)

## API 명세

실행 후 `http://localhost:8080/swagger-ui/#/` 페이지에서 확인 가능.

### POST /login : 로그인

- 요청
    - 바디에 아이디(username)과 비밀번호(password) 포함
- 응답
    - 성공시 200 : 바디에 토큰(accessToken) 포함
    - 실패시 401 : 존재하지 않는 아이디 입력, 잘못된 비밀번호 등 모든 경우에 대해 동일한 예외 메시지

### POST /customers : 회원가입

- 요청
    - 바디에 아이디(username), 비밀번호(password), 닉네임(nickname), 나이(age) 포함
- 응답
    - 성공시 201 : Location 헤더에 생성된 고객 정보를 토대로 `/customers/{customerId}` 포함

### GET /customers/me : 내 정보 조회

- 요청
    - 로그인한 상태로 요청
- 응답
    - 성공시 200 : 바디에 아이디(username), 닉네임(nickname), 나이(age) 포함

### PUT /customers/me : 나의 정보(닉네임, 나이) 수정

- 요청
    - 로그인한 상태로 바디에 아이디(username), 닉네임(nickname), 나이(age) 포함하여 요청
- 응답
    - 성공시 200 : 비어있는 바디
    - 아이디를 수정하려는 경우 400

### DELETE /customers/me : 나의 계정 삭

- 요청
    - 로그인한 상태로 요청
- 응답
    - 성공시 204 : 비어있는 바디
    - 이미 존재하지 않는 사용자를 삭제하려는 경우 404

### PUT /customers/me/password : 나의 비밀번호 수정

- 요청
    - 로그인한 상태로 바디에 현재 비밀번호(oldPassword)와 새로운 비밀번호(newPassword)을 포함하여 요청
- 응답
    - 성공시 200 : 비어있는 바디
    - 현재 비밀번호와 새로운 비밀번호가 동일한 경우 200
    - 현재 비밀번호를 잘못 입력한 경우 400
    - 이미 존재하지 않는 사용자의 비밀번호를 수정하려는 경우 404

### GET /customers/username/duplication : 아이디 중복 조회

- 요청
    - 바디에 아이디(username)를 포함하여 요청
- 응답
    - 성공시 200 : isUnique 필드에 중복되지 않는 아이디 여부를 포함

## 공통 내역

### 로그인한 상태의 요청

- Authorization 헤더에 Bearer 토큰을 포함하여 요청
- 토큰에 문제가 있는 경우, 401 혹은 403

### 예외 응답

- 모든 예외는 JSON 형식의 바디를 반환. message 필드에 한 줄의 예외메시지 포함.
- JSON 바디에 포함되어야 하는 정보가 누락된 경우 400.
    - 누락된 입력값에 대한 정보들은 예외메시지에서 개별적으로 명시.

### 사용자(user)와 고객(customer)

- admin 계정의 도입 가능성으로 인해 고객은 사용자의 한 종류로 간주. (논의 중)

#### 유효성 검증

고객/사용자의 정보가 잘못 입력된 경우 400

- 아이디(username)
    - 영문자와 숫자로 구성. 4~20글자.
        - REGEX : (`^[a-zA-Z0-9]{4,20}$`)
- 비밀번호(password)
    - 영문자, 숫자, 특수문자로 구성. 8~20글자. 영문자, 숫자, 특수문자 모두 적어도 하나씩 필요.
        - REGEX : `^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!@#$%^*])[a-zA-Z0-9!@#$%^*]{8,20}$`
- 닉네임(nickname)
    - 한글, 영문자, 숫자로 구성. 1~10글자.
        - REGEX : `^[가-힣a-zA-Z0-9]{1,10}$`
- 나이(age)
    - 0 이상 200 이하의 정수
